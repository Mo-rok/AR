<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Zappar AR с маркером</title>
    <!-- Подключаем Zappar WebAR SDK -->
    <script src="https://libs.zappar.com/zappar-web/1.3.0/zappar.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial;
            z-index: 100;
        }
        #ar-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="loading">Наведите камеру на маркер...</div>
    <div id="ar-container"></div>

    <script>
        // Инициализация Zappar
        const manager = new Zappar.WebAR({
            container: document.getElementById("ar-container"),
            camera: "back" // или "front" для селфи
        });

        // Загружаем маркер
        const marker = new Zappar.ImageTracker();
        marker.loadTarget("marker.png"); // Укажите URL или локальный файл
        manager.tracker = marker;

        // Загружаем 3D-модель
        manager.loadGLTF("model.glb").then((model) => {
            const obj = manager.instantiate(model);
            obj.position.set(0, 0, 0); // Позиция относительно маркера
            obj.scale.set(0.5, 0.5, 0.5); // Масштаб модели
            
            document.getElementById("loading").style.display = "none";
        }).catch((e) => {
            console.error("Ошибка загрузки модели:", e);
            document.getElementById("loading").textContent = "Ошибка! Проверьте консоль.";
        });

        // Запуск AR
        manager.start().catch(() => {
            alert("Разрешите доступ к камере!");
        });
    </script>
</body>
</html>
